[Tests]
  issues = '#1'
  design = 'AbaqusUExternalDB.md'

  [execution]
    requirement = 'The Abaqus UEXTERNALDB interface shall execute the UEXTERNALDB routine at the '
    [initial]
      type = 'RunApp'
      input = 'utility_functions.i'
      library_mode = 'DYNAMIC'
      valgrind = 'NONE'
      cli_args = 'UserObjects/uexternaldb/execute_on=INITIAL'
      expect_out = 'UEXTERNALDB           0 '
      detail = 'beginning of the simulation.'
    []
    [timestep_begin]
      type = 'RunApp'
      input = 'utility_functions.i'
      library_mode = 'DYNAMIC'
      valgrind = 'NONE'
      cli_args = 'UserObjects/uexternaldb/execute_on=TIMESTEP_BEGIN'
      expect_out = 'UEXTERNALDB           1 '
      detail = 'beginning of each MOOSE time step.'
    []
    [timestep_end]
      type = 'RunApp'
      input = 'utility_functions.i'
      library_mode = 'DYNAMIC'
      valgrind = 'NONE'
      cli_args = 'UserObjects/uexternaldb/execute_on=TIMESTEP_END'
      expect_out = 'UEXTERNALDB           2 '
      detail = 'end of each MOOSE time step.'
    []
    [final]
      type = 'RunApp'
      input = 'utility_functions.i'
      library_mode = 'DYNAMIC'
      valgrind = 'NONE'
      cli_args = 'UserObjects/uexternaldb/execute_on=FINAL'
      expect_out = 'UEXTERNALDB           3 '
      detail = 'end of the simulation.'
    []
  []

  [step]
    type = 'RunApp'
    input = 'utility_functions.i'
    library_mode = 'DYNAMIC'
    valgrind = 'NONE'
    cli_args = 'UserObjects/uexternaldb/abaqus_step=12345678 '
               'UserObjects/uexternaldb/execute_on=INITIAL'
    expect_out = 'UEXTERNALDB           0           0   0.0000000000000000        0.0000000000000000 '
                 '       0.0000000000000000         12345678           0'
    requirement = 'The Abaqus UEXTERNALDB interface shall be able to pass in a custom Abaqus step '
                  'number.'
  []

  [messages]
    requirement = 'The Abaqus UEXTERNALDB interface shall provide Abaqus compatible message routine '
                  'supporting the '
    [info]
      type = 'RunApp'
      input = 'utility_functions.i'
      library_mode = 'DYNAMIC'
      valgrind = 'NONE'
      cli_args = 'UserObjects/uexternaldb/abaqus_step=1 UserObjects/uexternaldb/execute_on=INITIAL'
      expect_out = '\*\* Abaqus Info \*\*\nInline message 1 2 0.100000 0.200000 0.300000 ONE      TWO    '
                   ' !'
      detail = 'info level.'
    []
    [warning]
      type = 'RunApp'
      input = 'utility_functions.i'
      library_mode = 'DYNAMIC'
      valgrind = 'NONE'
      cli_args = 'UserObjects/uexternaldb/abaqus_step=2 UserObjects/uexternaldb/execute_on=INITIAL'
      expect_out = '\*\* Abaqus Warning \*\*\nInline message 1 2 0.100000 0.200000 0.300000 ONE      TWO     !'
      detail = 'warning level.'
    []
    [non_fatal]
      type = 'RunApp'
      input = 'utility_functions.i'
      library_mode = 'DYNAMIC'
      valgrind = 'NONE'
      cli_args = 'UserObjects/uexternaldb/abaqus_step=3 UserObjects/uexternaldb/execute_on=INITIAL'
      expect_out = '\*\* Abaqus Non-fatal Error \*\*\nInline message 1 2 0.100000 0.200000 0.300000 ONE      TWO     !'
      detail = 'non-fatal error level.'
    []
    [error]
      type = 'RunException'
      input = 'utility_functions.i'
      library_mode = 'DYNAMIC'
      valgrind = 'NONE'
      cli_args = 'UserObjects/uexternaldb/abaqus_step=4 UserObjects/uexternaldb/execute_on=INITIAL'
      expect_err = '\*\*\* ERROR \*\*\*\nInline message 1 2 0.100000 0.200000 0.300000 ONE      TWO     !'
      detail = 'non-fatal error level.'
    []
  []
[]
